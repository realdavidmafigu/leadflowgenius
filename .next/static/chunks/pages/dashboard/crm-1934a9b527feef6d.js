(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[961],{1636:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/crm",function(){return t(3940)}])},3455:(e,a,t)=>{"use strict";t.d(a,{A:()=>d});var s=t(7876),l=t(4232),r=t(8230),n=t.n(r),i=t(9099);let o=[{label:"Dashboard Overview",href:"/dashboard/crm"},{label:"Clients",href:"/dashboard/crm/clients"},{label:"Invoices",href:"/dashboard/crm/invoices"},{label:"Products/Services",href:"/dashboard/crm/products"},{label:"Business Profile",href:"/dashboard/crm/profile"},{label:"Payments (Manual)",href:"/dashboard/crm/payments"}];function d(e){let{children:a}=e,t=(0,i.useRouter)(),[r,d]=(0,l.useState)(!1);return(0,s.jsxs)("div",{className:"min-h-screen flex font-sans",children:[(0,s.jsxs)("aside",{className:"hidden md:flex w-64 bg-gradient-to-b from-[#1a1333] via-[#2d1a4d] to-[#6a5cff] text-white/90 p-6 flex-col gap-6 border-r border-white/10 backdrop-blur-xl",children:[(0,s.jsx)("div",{className:"text-2xl font-extrabold bg-gradient-to-r from-[#ff5f8f] to-[#6a5cff] bg-clip-text text-transparent mb-8",children:"Leadflowgenius CRM"}),(0,s.jsx)("nav",{className:"flex flex-col gap-3",children:o.map(e=>(0,s.jsx)(n(),{href:e.href,legacyBehavior:!0,children:(0,s.jsx)("a",{className:"block px-4 py-2 rounded transition-colors ".concat(t.pathname===e.href?"bg-blue-700 font-semibold":"hover:bg-blue-800"),children:e.label})},e.href))})]}),(0,s.jsx)("button",{className:"md:hidden fixed top-4 left-4 z-50 bg-[#1a1333] text-white p-2 rounded shadow-lg focus:outline-none focus:ring-2 focus:ring-white/50","aria-label":"Open navigation menu",onClick:()=>d(!0),children:(0,s.jsx)("svg",{className:"h-7 w-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),r&&(0,s.jsxs)("div",{className:"md:hidden fixed inset-0 z-40 flex",children:[(0,s.jsxs)("div",{className:"w-64 bg-gradient-to-b from-[#1a1333] via-[#2d1a4d] to-[#6a5cff] text-white/90 p-6 flex flex-col gap-6 border-r border-white/10 backdrop-blur-xl animate-slide-in-left relative",children:[(0,s.jsx)("button",{className:"absolute top-4 right-4 text-white p-2 rounded focus:outline-none focus:ring-2 focus:ring-white/50","aria-label":"Close navigation menu",onClick:()=>d(!1),children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,s.jsx)("div",{className:"text-2xl font-extrabold bg-gradient-to-r from-[#ff5f8f] to-[#6a5cff] bg-clip-text text-transparent mb-8",children:"Leadflowgenius CRM"}),(0,s.jsx)("nav",{className:"flex flex-col gap-3",children:o.map(e=>(0,s.jsx)(n(),{href:e.href,legacyBehavior:!0,children:(0,s.jsx)("a",{className:"block px-4 py-2 rounded transition-colors ".concat(t.pathname===e.href?"bg-blue-700 font-semibold":"hover:bg-blue-800"),onClick:()=>d(!1),children:e.label})},e.href))})]}),(0,s.jsx)("div",{className:"flex-1 bg-black bg-opacity-40",onClick:()=>d(!1)})]}),(0,s.jsx)("main",{className:"flex-1 bg-gradient-to-br from-[#1a1333]/80 via-[#2d1a4d]/80 to-[#ff5f8f]/60 p-6 md:p-12 min-h-screen overflow-y-auto",children:(0,s.jsx)("div",{className:"max-w-6xl mx-auto bg-white/10 backdrop-blur-2xl rounded-2xl shadow-2xl border border-white/10 p-6 md:p-12",children:a})})]})}},3940:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var s=t(7876),l=t(4232),r=t(9966),n=t(9099),i=t(3455);function o(){let[e,a]=(0,l.useState)(!1),[t,o]=(0,l.useState)([]),[d,c]=(0,l.useState)(!0),[h,x]=(0,l.useState)({name:"",email:"",phone:"",company:"",location:"",notes:""}),[p,m]=(0,l.useState)(!1),[u,f]=(0,l.useState)(""),b=(0,n.useRouter)();(0,l.useEffect)(()=>{(async()=>{var e;c(!0);let a=null==(e=(await r.N.auth.getSession()).data.session)?void 0:e.access_token;if(!a)return c(!1);let t=await fetch("/api/clients",{headers:{Authorization:"Bearer ".concat(a)}});t.ok&&o(await t.json()),c(!1)})()},[e]);let g=e=>{x({...h,[e.target.name]:e.target.value})},w=async e=>{var t;e.preventDefault(),m(!0),f("");let s=null==(t=(await r.N.auth.getSession()).data.session)?void 0:t.access_token;if(!s){f("Not authenticated"),m(!1);return}let l=await fetch("/api/clients",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(h)});l.ok?(a(!1),x({name:"",email:"",phone:"",company:"",location:"",notes:""})):f((await l.json()).error||"Failed to add client"),m(!1)};return(0,s.jsx)(i.A,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-[#1a1333] via-[#2d1a4d] to-[#ff5f8f] p-4 md:p-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl shadow-lg border border-white/10 p-6 flex flex-col items-center",children:[(0,s.jsx)("span",{className:"text-2xl font-bold text-white",children:t.length}),(0,s.jsx)("span",{className:"text-white/70",children:"Total Clients"})]}),(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl shadow-lg border border-white/10 p-6 flex flex-col items-center",children:[(0,s.jsx)("span",{className:"text-2xl font-bold text-white",children:"0"}),(0,s.jsx)("span",{className:"text-white/70",children:"Active Invoices"})]}),(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl shadow-lg border border-white/10 p-6 flex flex-col items-center",children:[(0,s.jsx)("span",{className:"text-2xl font-bold text-white",children:"$0"}),(0,s.jsx)("span",{className:"text-white/70",children:"Total Revenue"})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold text-white",children:"Clients"}),(0,s.jsx)("button",{className:"bg-gradient-to-r from-[#ff5f8f] to-[#6a5cff] text-white px-4 py-2 rounded-lg font-bold shadow hover:scale-105 transition",onClick:()=>a(!0),children:"New Client"})]}),(0,s.jsx)("div",{className:"overflow-x-auto bg-white/10 backdrop-blur-xl rounded-2xl shadow-lg border border-white/10",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-white/10",children:[(0,s.jsx)("thead",{className:"bg-white/5",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-white/70 uppercase",children:"Name"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-white/70 uppercase",children:"Email"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-white/70 uppercase",children:"Phone"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-white/70 uppercase",children:"Company"}),(0,s.jsx)("th",{className:"px-4 py-2"}),(0,s.jsx)("th",{className:"px-4 py-2"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.name}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.email}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.phone}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.company}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,s.jsx)("button",{className:"bg-gray-200 text-gray-700 px-3 py-1 rounded hover:bg-gray-300",children:"Manage"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,s.jsx)("button",{className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",onClick:()=>b.push("/dashboard/crm/invoice/new?clientId=".concat(e.id)),children:"Create Invoice"})})]},e.id))})]})}),e&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md relative",children:[(0,s.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:()=>a(!1),children:"\xd7"}),(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Add New Client"}),(0,s.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,s.jsx)("input",{type:"text",name:"name",placeholder:"Name",value:h.name,onChange:g,className:"w-full px-3 py-2 border rounded",required:!0}),(0,s.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:h.email,onChange:g,className:"w-full px-3 py-2 border rounded",required:!0}),(0,s.jsx)("input",{type:"text",name:"phone",placeholder:"Phone Number",value:h.phone,onChange:g,className:"w-full px-3 py-2 border rounded",required:!0}),(0,s.jsx)("input",{type:"text",name:"company",placeholder:"Company Name",value:h.company,onChange:g,className:"w-full px-3 py-2 border rounded",required:!0}),(0,s.jsx)("input",{type:"text",name:"location",placeholder:"Location",value:h.location,onChange:g,className:"w-full px-3 py-2 border rounded",required:!0}),(0,s.jsx)("textarea",{name:"notes",placeholder:"Notes (optional)",value:h.notes,onChange:g,className:"w-full px-3 py-2 border rounded"}),u&&(0,s.jsx)("div",{className:"text-red-500 text-sm",children:u}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700",disabled:p,children:p?"Adding...":"Add Client"})]})]})})]})})}},9099:(e,a,t)=>{e.exports=t(8253)}},e=>{e.O(0,[230,636,593,792],()=>e(e.s=1636)),_N_E=e.O()}]);