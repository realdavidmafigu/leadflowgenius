(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[97],{1234:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(7876),r=a(4232),n=a(9966),l=a(3455);function i(){let[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)(!0),[o,d]=(0,r.useState)(""),[c,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{var e;i(!0),d("");let a=null==(e=(await n.N.auth.getSession()).data.session)?void 0:e.access_token;if(!a){d("Not authenticated"),i(!1);return}let s=await fetch("/api/manual-payments",{headers:{Authorization:"Bearer ".concat(a)}});s.ok?t((await s.json()).payments):d("Failed to fetch payments"),i(!1)})()},[]);let h=async(e,a)=>{var s;x(e+a),d("");let r=null==(s=(await n.N.auth.getSession()).data.session)?void 0:s.access_token;if(!r){d("Not authenticated"),x(null);return}(await fetch("/api/manual-payments",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({id:e,status:a})})).ok?t(t=>t.map(t=>t.id===e?{...t,status:a}:t)):d("Failed to update status"),x(null)};return(0,s.jsxs)(l.A,{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Manual Payment Confirmations"}),a?(0,s.jsx)("div",{className:"p-8 text-center text-gray-400",children:"Loading..."}):o?(0,s.jsx)("div",{className:"p-8 text-center text-red-500",children:o}):0===e.length?(0,s.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No payment confirmations found."}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Invoice"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Message"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Proof"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-2"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{var t;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:e.clientName}),(0,s.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:(null==(t=e.invoice)?void 0:t.title)||e.invoiceId}),(0,s.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:e.message}),(0,s.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:e.proofUrl?(0,s.jsx)("a",{href:e.proofUrl,target:"_blank",rel:"noopener noreferrer",children:(0,s.jsx)("img",{src:e.proofUrl,alt:"Proof",className:"h-12 rounded shadow"})}):(0,s.jsx)("span",{className:"text-gray-400",children:"â€”"})}),(0,s.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("paid"===e.status?"bg-green-100 text-green-700":"rejected"===e.status?"bg-red-100 text-red-700":"followup"===e.status?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,s.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap flex gap-2",children:[(0,s.jsx)("button",{className:"bg-green-600 text-white px-2 py-1 rounded text-xs hover:bg-green-700",disabled:c===e.id+"paid",onClick:()=>h(e.id,"paid"),children:"Mark as Paid"}),(0,s.jsx)("button",{className:"bg-red-600 text-white px-2 py-1 rounded text-xs hover:bg-red-700",disabled:c===e.id+"rejected",onClick:()=>h(e.id,"rejected"),children:"Reject"}),(0,s.jsx)("button",{className:"bg-yellow-500 text-white px-2 py-1 rounded text-xs hover:bg-yellow-600",disabled:c===e.id+"followup",onClick:()=>h(e.id,"followup"),children:"Follow Up"}),"paid"===e.status&&e.invoiceId&&(0,s.jsx)("a",{href:"https://wa.me/?text=".concat(encodeURIComponent("Hi ".concat(e.clientName,", your payment for invoice is received! Thank you. View your receipt: ").concat(window.location.origin,"/pay/").concat(e.invoiceId))),target:"_blank",rel:"noopener noreferrer",className:"bg-green-500 text-white px-2 py-1 rounded text-xs hover:bg-green-600",children:"Send Receipt"})]})]},e.id)})})]})})]})}},3455:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(7876),r=a(4232),n=a(8230),l=a.n(n),i=a(9099);let o=[{label:"Dashboard Overview",href:"/dashboard/crm"},{label:"Clients",href:"/dashboard/crm/clients"},{label:"Invoices",href:"/dashboard/crm/invoices"},{label:"Products/Services",href:"/dashboard/crm/products"},{label:"Business Profile",href:"/dashboard/crm/profile"},{label:"Payments (Manual)",href:"/dashboard/crm/payments"}];function d(e){let{children:t}=e,a=(0,i.useRouter)(),[n,d]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"min-h-screen flex font-sans",children:[(0,s.jsxs)("aside",{className:"hidden md:flex w-64 bg-gradient-to-b from-[#1a1333] via-[#2d1a4d] to-[#6a5cff] text-white/90 p-6 flex-col gap-6 border-r border-white/10 backdrop-blur-xl",children:[(0,s.jsx)("div",{className:"text-2xl font-extrabold bg-gradient-to-r from-[#ff5f8f] to-[#6a5cff] bg-clip-text text-transparent mb-8",children:"Leadflowgenius CRM"}),(0,s.jsx)("nav",{className:"flex flex-col gap-3",children:o.map(e=>(0,s.jsx)(l(),{href:e.href,legacyBehavior:!0,children:(0,s.jsx)("a",{className:"block px-4 py-2 rounded transition-colors ".concat(a.pathname===e.href?"bg-blue-700 font-semibold":"hover:bg-blue-800"),children:e.label})},e.href))})]}),(0,s.jsx)("button",{className:"md:hidden fixed top-4 left-4 z-50 bg-[#1a1333] text-white p-2 rounded shadow-lg focus:outline-none focus:ring-2 focus:ring-white/50","aria-label":"Open navigation menu",onClick:()=>d(!0),children:(0,s.jsx)("svg",{className:"h-7 w-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),n&&(0,s.jsxs)("div",{className:"md:hidden fixed inset-0 z-40 flex",children:[(0,s.jsxs)("div",{className:"w-64 bg-gradient-to-b from-[#1a1333] via-[#2d1a4d] to-[#6a5cff] text-white/90 p-6 flex flex-col gap-6 border-r border-white/10 backdrop-blur-xl animate-slide-in-left relative",children:[(0,s.jsx)("button",{className:"absolute top-4 right-4 text-white p-2 rounded focus:outline-none focus:ring-2 focus:ring-white/50","aria-label":"Close navigation menu",onClick:()=>d(!1),children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,s.jsx)("div",{className:"text-2xl font-extrabold bg-gradient-to-r from-[#ff5f8f] to-[#6a5cff] bg-clip-text text-transparent mb-8",children:"Leadflowgenius CRM"}),(0,s.jsx)("nav",{className:"flex flex-col gap-3",children:o.map(e=>(0,s.jsx)(l(),{href:e.href,legacyBehavior:!0,children:(0,s.jsx)("a",{className:"block px-4 py-2 rounded transition-colors ".concat(a.pathname===e.href?"bg-blue-700 font-semibold":"hover:bg-blue-800"),onClick:()=>d(!1),children:e.label})},e.href))})]}),(0,s.jsx)("div",{className:"flex-1 bg-black bg-opacity-40",onClick:()=>d(!1)})]}),(0,s.jsx)("main",{className:"flex-1 bg-gradient-to-br from-[#1a1333]/80 via-[#2d1a4d]/80 to-[#ff5f8f]/60 p-6 md:p-12 min-h-screen overflow-y-auto",children:(0,s.jsx)("div",{className:"max-w-6xl mx-auto bg-white/10 backdrop-blur-2xl rounded-2xl shadow-2xl border border-white/10 p-6 md:p-12",children:t})})]})}},4466:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/crm/payments",function(){return a(1234)}])},9099:(e,t,a)=>{e.exports=a(8253)}},e=>{e.O(0,[230,636,593,792],()=>e(e.s=4466)),_N_E=e.O()}]);