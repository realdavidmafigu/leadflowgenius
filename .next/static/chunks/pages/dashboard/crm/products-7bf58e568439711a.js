(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[920],{3455:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(7876),r=a(4232),l=a(8230),i=a.n(l),n=a(9099);let d=[{label:"Dashboard Overview",href:"/dashboard/crm"},{label:"Clients",href:"/dashboard/crm/clients"},{label:"Invoices",href:"/dashboard/crm/invoices"},{label:"Products/Services",href:"/dashboard/crm/products"},{label:"Business Profile",href:"/dashboard/crm/profile"},{label:"Payments (Manual)",href:"/dashboard/crm/payments"}];function o(e){let{children:t}=e,a=(0,n.useRouter)(),[l,o]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"min-h-screen flex font-sans",children:[(0,s.jsxs)("aside",{className:"hidden md:flex w-64 bg-gradient-to-b from-[#1a1333] via-[#2d1a4d] to-[#6a5cff] text-white/90 p-6 flex-col gap-6 border-r border-white/10 backdrop-blur-xl",children:[(0,s.jsx)("div",{className:"text-2xl font-extrabold bg-gradient-to-r from-[#ff5f8f] to-[#6a5cff] bg-clip-text text-transparent mb-8",children:"Leadflowgenius CRM"}),(0,s.jsx)("nav",{className:"flex flex-col gap-3",children:d.map(e=>(0,s.jsx)(i(),{href:e.href,legacyBehavior:!0,children:(0,s.jsx)("a",{className:"block px-4 py-2 rounded transition-colors ".concat(a.pathname===e.href?"bg-blue-700 font-semibold":"hover:bg-blue-800"),children:e.label})},e.href))})]}),(0,s.jsx)("button",{className:"md:hidden fixed top-4 left-4 z-50 bg-[#1a1333] text-white p-2 rounded shadow-lg focus:outline-none focus:ring-2 focus:ring-white/50","aria-label":"Open navigation menu",onClick:()=>o(!0),children:(0,s.jsx)("svg",{className:"h-7 w-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),l&&(0,s.jsxs)("div",{className:"md:hidden fixed inset-0 z-40 flex",children:[(0,s.jsxs)("div",{className:"w-64 bg-gradient-to-b from-[#1a1333] via-[#2d1a4d] to-[#6a5cff] text-white/90 p-6 flex flex-col gap-6 border-r border-white/10 backdrop-blur-xl animate-slide-in-left relative",children:[(0,s.jsx)("button",{className:"absolute top-4 right-4 text-white p-2 rounded focus:outline-none focus:ring-2 focus:ring-white/50","aria-label":"Close navigation menu",onClick:()=>o(!1),children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,s.jsx)("div",{className:"text-2xl font-extrabold bg-gradient-to-r from-[#ff5f8f] to-[#6a5cff] bg-clip-text text-transparent mb-8",children:"Leadflowgenius CRM"}),(0,s.jsx)("nav",{className:"flex flex-col gap-3",children:d.map(e=>(0,s.jsx)(i(),{href:e.href,legacyBehavior:!0,children:(0,s.jsx)("a",{className:"block px-4 py-2 rounded transition-colors ".concat(a.pathname===e.href?"bg-blue-700 font-semibold":"hover:bg-blue-800"),onClick:()=>o(!1),children:e.label})},e.href))})]}),(0,s.jsx)("div",{className:"flex-1 bg-black bg-opacity-40",onClick:()=>o(!1)})]}),(0,s.jsx)("main",{className:"flex-1 bg-gradient-to-br from-[#1a1333]/80 via-[#2d1a4d]/80 to-[#ff5f8f]/60 p-6 md:p-12 min-h-screen overflow-y-auto",children:(0,s.jsx)("div",{className:"max-w-6xl mx-auto bg-white/10 backdrop-blur-2xl rounded-2xl shadow-2xl border border-white/10 p-6 md:p-12",children:t})})]})}},4471:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(7876),r=a(4232),l=a(3455),i=a(9966);let n={name:"",description:"",price:0,type:"Product",category:""};function d(){let[e,t]=(0,r.useState)([]),[a,d]=(0,r.useState)(!0),[o,c]=(0,r.useState)(""),[x,h]=(0,r.useState)(n),[p,m]=(0,r.useState)(null),[u,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{var e;d(!0),c("");let a=null==(e=(await i.N.auth.getSession()).data.session)?void 0:e.access_token;if(!a){c("Not authenticated"),d(!1);return}let s=await fetch("/api/products",{headers:{Authorization:"Bearer ".concat(a)}});s.ok?t((await s.json()).products):c("Failed to load products"),d(!1)})()},[]);let b=e=>{let{name:t,value:a}=e.target;h(e=>({...e,[t]:"price"===t?parseFloat(a):a}))},g=async e=>{var a;if(!window.confirm("Delete this product?"))return;f(!0),c("");let s=null==(a=(await i.N.auth.getSession()).data.session)?void 0:a.access_token;if(!s){c("Not authenticated"),f(!1);return}(await fetch("/api/products",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({id:e})})).ok?t(t=>t.filter(t=>t.id!==e)):c("Failed to delete"),f(!1)},N=async e=>{var a;e.preventDefault(),f(!0),c("");let s=null==(a=(await i.N.auth.getSession()).data.session)?void 0:a.access_token;if(!s){c("Not authenticated"),f(!1);return}let r=await fetch("/api/products",{method:p?"PATCH":"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({...x,id:p})});if(r.ok){let{product:e}=await r.json();t(t=>p?t.map(t=>t.id===p?e:t):[e,...t]),h(n),m(null)}else c("Failed to save");f(!1)};return(0,s.jsx)(l.A,{children:(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-[#1a1333] via-[#2d1a4d] to-[#ff5f8f] p-4 md:p-8",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto bg-white/10 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/10 p-8 mt-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6 text-white",children:"Products & Services"}),(0,s.jsxs)("form",{onSubmit:N,className:"space-y-4 mb-8",children:[(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Name"}),(0,s.jsx)("input",{type:"text",name:"name",className:"w-full px-3 py-2 border rounded",value:x.name||"",onChange:b,required:!0})]}),(0,s.jsxs)("div",{className:"w-32",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Type"}),(0,s.jsxs)("select",{name:"type",className:"w-full px-3 py-2 border rounded",value:x.type||"Product",onChange:b,children:[(0,s.jsx)("option",{value:"Product",children:"Product"}),(0,s.jsx)("option",{value:"Service",children:"Service"})]})]}),(0,s.jsxs)("div",{className:"w-32",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Unit Price"}),(0,s.jsx)("input",{type:"number",name:"price",className:"w-full px-3 py-2 border rounded",value:x.price||0,onChange:b,min:0,step:.01,required:!0})]})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description"}),(0,s.jsx)("textarea",{name:"description",className:"w-full px-3 py-2 border rounded",value:x.description||"",onChange:b})]}),(0,s.jsxs)("div",{className:"w-64",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Category (optional)"}),(0,s.jsx)("input",{type:"text",name:"category",className:"w-full px-3 py-2 border rounded",value:x.category||"",onChange:b})]})]}),o&&(0,s.jsx)("div",{className:"text-red-500 text-sm",children:o}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",disabled:u,children:u?p?"Saving...":"Adding...":p?"Save Changes":"Add Product/Service"}),p&&(0,s.jsx)("button",{type:"button",className:"bg-gray-200 text-gray-700 px-6 py-2 rounded hover:bg-gray-300",onClick:()=>{h(n),m(null)},children:"Cancel"})]})]}),(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4 text-white",children:"Your Products & Services"}),a?(0,s.jsx)("div",{className:"text-center text-gray-400",children:"Loading..."}):0===e.length?(0,s.jsx)("div",{className:"text-center text-gray-500",children:"No products or services found."}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Price"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),(0,s.jsx)("th",{className:"px-4 py-2"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-4 py-2 whitespace-nowrap font-semibold",children:e.name}),(0,s.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:e.type}),(0,s.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap",children:["$",e.price.toFixed(2)]}),(0,s.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:e.category||"—"}),(0,s.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:e.description||"—"}),(0,s.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap flex gap-2",children:[(0,s.jsx)("button",{className:"bg-blue-500 text-white px-2 py-1 rounded text-xs hover:bg-blue-600",onClick:()=>{h(e),m(e.id)},children:"Edit"}),(0,s.jsx)("button",{className:"bg-red-500 text-white px-2 py-1 rounded text-xs hover:bg-red-600",onClick:()=>g(e.id),disabled:u,children:"Delete"})]})]},e.id))})]})})]})})})}},9099:(e,t,a)=>{e.exports=a(8253)},9420:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/crm/products",function(){return a(4471)}])}},e=>{e.O(0,[230,636,593,792],()=>e(e.s=9420)),_N_E=e.O()}]);