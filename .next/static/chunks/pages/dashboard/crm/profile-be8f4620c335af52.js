(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[435],{3455:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var l=a(7876),s=a(4232),o=a(8230),i=a.n(o),n=a(9099);let r=[{label:"Dashboard Overview",href:"/dashboard/crm"},{label:"Clients",href:"/dashboard/crm/clients"},{label:"Invoices",href:"/dashboard/crm/invoices"},{label:"Products/Services",href:"/dashboard/crm/products"},{label:"Business Profile",href:"/dashboard/crm/profile"},{label:"Payments (Manual)",href:"/dashboard/crm/payments"}];function d(e){let{children:t}=e,a=(0,n.useRouter)(),[o,d]=(0,s.useState)(!1);return(0,l.jsxs)("div",{className:"min-h-screen flex font-sans",children:[(0,l.jsxs)("aside",{className:"hidden md:flex w-64 bg-gradient-to-b from-[#1a1333] via-[#2d1a4d] to-[#6a5cff] text-white/90 p-6 flex-col gap-6 border-r border-white/10 backdrop-blur-xl",children:[(0,l.jsx)("div",{className:"text-2xl font-extrabold bg-gradient-to-r from-[#ff5f8f] to-[#6a5cff] bg-clip-text text-transparent mb-8",children:"Leadflowgenius CRM"}),(0,l.jsx)("nav",{className:"flex flex-col gap-3",children:r.map(e=>(0,l.jsx)(i(),{href:e.href,legacyBehavior:!0,children:(0,l.jsx)("a",{className:"block px-4 py-2 rounded transition-colors ".concat(a.pathname===e.href?"bg-blue-700 font-semibold":"hover:bg-blue-800"),children:e.label})},e.href))})]}),(0,l.jsx)("button",{className:"md:hidden fixed top-4 left-4 z-50 bg-[#1a1333] text-white p-2 rounded shadow-lg focus:outline-none focus:ring-2 focus:ring-white/50","aria-label":"Open navigation menu",onClick:()=>d(!0),children:(0,l.jsx)("svg",{className:"h-7 w-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),o&&(0,l.jsxs)("div",{className:"md:hidden fixed inset-0 z-40 flex",children:[(0,l.jsxs)("div",{className:"w-64 bg-gradient-to-b from-[#1a1333] via-[#2d1a4d] to-[#6a5cff] text-white/90 p-6 flex flex-col gap-6 border-r border-white/10 backdrop-blur-xl animate-slide-in-left relative",children:[(0,l.jsx)("button",{className:"absolute top-4 right-4 text-white p-2 rounded focus:outline-none focus:ring-2 focus:ring-white/50","aria-label":"Close navigation menu",onClick:()=>d(!1),children:(0,l.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,l.jsx)("div",{className:"text-2xl font-extrabold bg-gradient-to-r from-[#ff5f8f] to-[#6a5cff] bg-clip-text text-transparent mb-8",children:"Leadflowgenius CRM"}),(0,l.jsx)("nav",{className:"flex flex-col gap-3",children:r.map(e=>(0,l.jsx)(i(),{href:e.href,legacyBehavior:!0,children:(0,l.jsx)("a",{className:"block px-4 py-2 rounded transition-colors ".concat(a.pathname===e.href?"bg-blue-700 font-semibold":"hover:bg-blue-800"),onClick:()=>d(!1),children:e.label})},e.href))})]}),(0,l.jsx)("div",{className:"flex-1 bg-black bg-opacity-40",onClick:()=>d(!1)})]}),(0,l.jsx)("main",{className:"flex-1 bg-gradient-to-br from-[#1a1333]/80 via-[#2d1a4d]/80 to-[#ff5f8f]/60 p-6 md:p-12 min-h-screen overflow-y-auto",children:(0,l.jsx)("div",{className:"max-w-6xl mx-auto bg-white/10 backdrop-blur-2xl rounded-2xl shadow-2xl border border-white/10 p-6 md:p-12",children:t})})]})}},7208:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/crm/profile",function(){return a(7282)}])},7282:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var l=a(7876),s=a(4232),o=a(3455),i=a(9966);function n(){let[e,t]=(0,s.useState)(null),[a,n]=(0,s.useState)(!0),[r,d]=(0,s.useState)(!1),[c,f]=(0,s.useState)(""),[h,u]=(0,s.useState)(!1),[x,m]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{var e;n(!0),f("");let a=null==(e=(await i.N.auth.getSession()).data.session)?void 0:e.access_token;if(!a){f("Not authenticated"),n(!1);return}let l=await fetch("/api/business-profile",{headers:{Authorization:"Bearer ".concat(a)}});l.ok?t((await l.json()).profile||{}):f("Failed to load profile"),n(!1)})()},[]);let b=e=>{let{name:a,value:l,files:s}=e.target;"logo"===a&&s&&s[0]?m(s[0]):t(e=>({...e,[a]:l}))},p=async t=>{var a;t.preventDefault(),d(!0),f(""),u(!1);let l=e.logoUrl;if(x){let e=new FormData;e.append("file",x);let t=await fetch("/api/upload-proof",{method:"POST",body:e});if(t.ok){let{url:e}=await t.json();l=e}}let s=null==(a=(await i.N.auth.getSession()).data.session)?void 0:a.access_token;if(!s){f("Not authenticated"),d(!1);return}(await fetch("/api/business-profile",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({...e,logoUrl:l})})).ok?u(!0):f("Failed to save profile"),d(!1)};return(0,l.jsx)(o.A,{children:(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-[#1a1333] via-[#2d1a4d] to-[#ff5f8f] p-4 md:p-8",children:(0,l.jsxs)("div",{className:"max-w-xl mx-auto bg-white/10 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/10 p-8 mt-8",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-6 text-white",children:"Business Profile"}),a?(0,l.jsx)("div",{className:"text-center text-white/70",children:"Loading..."}):(0,l.jsxs)("form",{onSubmit:p,className:"space-y-5",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1 text-white/80",children:"Business Name"}),(0,l.jsx)("input",{type:"text",name:"name",className:"w-full px-3 py-2 border rounded bg-white/10 text-white placeholder-white/60 border-white/20 focus:outline-none focus:ring-2 focus:ring-[#ff5f8f]",value:(null==e?void 0:e.name)||"",onChange:b,required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1 text-white/80",children:"Logo"}),(0,l.jsx)("input",{type:"file",name:"logo",accept:"image/*",className:"w-full text-white",onChange:b}),(null==e?void 0:e.logoUrl)&&(0,l.jsx)("img",{src:e.logoUrl,alt:"Logo",className:"h-16 mt-2 rounded shadow"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1 text-white/80",children:"Phone Number"}),(0,l.jsx)("input",{type:"text",name:"phone",className:"w-full px-3 py-2 border rounded bg-white/10 text-white placeholder-white/60 border-white/20 focus:outline-none focus:ring-2 focus:ring-[#ff5f8f]",value:(null==e?void 0:e.phone)||"",onChange:b,required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1 text-white/80",children:"Email"}),(0,l.jsx)("input",{type:"email",name:"email",className:"w-full px-3 py-2 border rounded bg-white/10 text-white placeholder-white/60 border-white/20 focus:outline-none focus:ring-2 focus:ring-[#ff5f8f]",value:(null==e?void 0:e.email)||"",onChange:b,required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1 text-white/80",children:"Website"}),(0,l.jsx)("input",{type:"text",name:"website",className:"w-full px-3 py-2 border rounded bg-white/10 text-white placeholder-white/60 border-white/20 focus:outline-none focus:ring-2 focus:ring-[#ff5f8f]",value:(null==e?void 0:e.website)||"",onChange:b})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1 text-white/80",children:"Address"}),(0,l.jsx)("input",{type:"text",name:"address",className:"w-full px-3 py-2 border rounded bg-white/10 text-white placeholder-white/60 border-white/20 focus:outline-none focus:ring-2 focus:ring-[#ff5f8f]",value:(null==e?void 0:e.address)||"",onChange:b})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1 text-white/80",children:"Payment Instructions"}),(0,l.jsx)("textarea",{name:"paymentInstructions",className:"w-full px-3 py-2 border rounded bg-white/10 text-white placeholder-white/60 border-white/20 focus:outline-none focus:ring-2 focus:ring-[#ff5f8f]",value:(null==e?void 0:e.paymentInstructions)||"",onChange:b})]}),(0,l.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-[#ff5f8f] to-[#6a5cff] text-white py-3 rounded-lg font-bold text-lg shadow-lg hover:scale-105 transition mt-4",disabled:r,children:r?"Saving...":"Save Profile"}),c&&(0,l.jsx)("div",{className:"text-red-400 text-sm text-center mt-2",children:c}),h&&(0,l.jsx)("div",{className:"text-green-400 text-sm text-center mt-2",children:"Profile saved!"})]})]})})})}},9099:(e,t,a)=>{e.exports=a(8253)}},e=>{e.O(0,[230,636,593,792],()=>e(e.s=7208)),_N_E=e.O()}]);